<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body><h3>设备接口示例</h3>
<div>
    <div>
        设备接口：
    </div>
    <br>
    <input type="button" onclick="addDevice()" value="新增设备">
    <div id="add_device"></div>
    <br>
    <input type="button" onclick="queryDevice()" value="查询设备">
    <div id="query_device"></div>
    <br>
    <input type="button" onclick="deleteDevice()" value="删除设备">
    <div id="delete_device"></div>
</div>

<script src="js/jquery-3.7.0.min.js"></script>
<script>

    var token = localStorage.getItem("X-Access-Token");

    $.ajaxSetup({
        beforeSend: function (jqXHR, settings) {
            jqXHR.setRequestHeader("X-Access-Token", token);
        }
    });

    function addDevice() {
        var data = {
            "id":"demo",
            "name":"设备001",
            "category":"服务器",
            "location":"A-01",
            "manager":"DEMO"
        };
        $.ajax({
            url: "/sdk/device",
            type: "POST",
            data: JSON.stringify(data),
            contentType: "application/json",
            withCredential: true,
            dataType: 'json',
            success: function (data) {
                console.log(data);
                document.getElementById("add_device").innerText = JSON.stringify(data, null, 8);
            },
            error: function (err) {
                console.log(err);
                document.getElementById("add_device").innerText = JSON.stringify(err.responseJSON, null, 8);
            }
        });
    }

    function queryDevice() {
        $.ajax({
            url: "/sdk/device/demo",
            type: "GET",
            contentType: "application/json",
            withCredential: true,
            dataType: 'json',
            success: function (data) {
                console.log(data);
                document.getElementById("query_device").innerText = JSON.stringify(data, null, 8);
            },
            error: function (err) {
                console.log(err);
                document.getElementById("query_device").innerText = JSON.stringify(err.responseJSON, null, 8);
            }
        });
    }

    function deleteDevice() {
        $.ajax({
            url: "/sdk/device/demo",
            type: "DELETE",
            contentType: "application/json",
            withCredential: true,
            dataType: 'json',
            success: function (data) {
                console.log(data);
                document.getElementById("delete_device").innerText = JSON.stringify(data, null, 8);
            },
            error: function (err) {
                console.log(err);
                document.getElementById("delete_device").innerText = JSON.stringify(err.responseJSON, null, 8);
            }
        });
    }
</script>


</body>
</html>